<!-- title -->
<section id="home">
  <h1>Cloud Native OCI</h1>
  <h2>Developer Setup</h2>
  include "partials/_titleSlide.html"
</section>

<section id="options">
  <h2>Environment Options</h2>

  <ul class="plain mu-flex mu-wrap mu-flex-stretch mu-gutter">
    <li class="card col-1-3 mu-svc">
      <img data-src="/images/tech/docker.png" alt="docker" />
    </li>
    <li class="card col-1-3 mu-svc">
      <img data-src="/images/tech/k8s.png" alt="kubernetes" />
    </li>
    <li class="card col-1-3 mu-svc">
      <img data-src="/images/tech/helm.svg" alt="helm" />
    </li>
  </ul>

  <div class="mu-flex mu-flex-middle mu-small mu-margin">
    <div>Manual</div>
    <div class="mu-flex-connector arrow"></div>
    <div>Automated</div>
  </div>

  <div class="testimonials mu-margin ">
    <ul class="mu-flex mu-gutter mu-smaller mu-wrap">
      <li class="card col-1-1 fragment fade-up">
        A microservices design offers excellent separation of concerns,
        and developer independence.
      </li>
      <li class="card col-1-1 fragment fade-up">
        While these benefits are clear, they can often introduce some complexity
        for development environments.
      </li>
      <li class="card col-1-1 fragment fade-up">
        Services support configurations that offer flexibity
        as necessary, and establish parity as much as possible.
      </li>
      <li class="card col-1-1 fragment fade-up">
        Use the same tools for development - production.
      </li>
    </ul>
  </div>
</section>

<!-- exercise -->
<section>
  <section id="lab" data-background-image="/images/logo.png" data-background-size="150px"
  data-background-position="20px 20px">
    <h2>MuShop Development</h2>

    <div class="mu-flex mu-small switcher">
      <ul>
        <li class="fragment">Get Source Code</li>
        <li class="fragment">Prepare Cluster</li>
        <li class="fragment">Install MuShop</li>
        <li class="fragment">Launch App</li>
      </ul>
      <ul class="col-1-1">
        <li>
          <ol>
            <li>Connect to ğŸ”’ VPN</li>
            <li>Open <a href="https://orahub.oraclecorp.com/ateam/mushop-oci-demo" target="blank">repo</a></li>
            <li>
              Click <a class="oui-button oui-button-primary">Clone</a>
              <em class="mu-medium">(May require adding an <a href="https://orahub.oraclecorp.com/profile/keys" target="_blank">SSH key</a>)</em>

              <div class="mu-medium mu-margin-top">
                  <pre><code class="hljs text">git clone git@orahub.oraclecorp.com:ateam/mushop-oci-demo.git mushop
cd mushop</code></pre>
                  <pre class="mu-small"><code class="hljs text">.
â”œâ”€â”€ README.md
â”œâ”€â”€ deploy
â”‚   â”œâ”€â”€ docker-compose
â”‚   â”œâ”€â”€ helm-chart
â”‚   â””â”€â”€ kubernetes
â””â”€â”€ src
    â”œâ”€â”€ api
    â”œâ”€â”€ carts
    â”œâ”€â”€ catalogue
    â”œâ”€â”€ edge-router
    â”œâ”€â”€ load
    â”œâ”€â”€ orders
    â”œâ”€â”€ payment
    â”œâ”€â”€ shipping
    â”œâ”€â”€ storefront
    â”œâ”€â”€ stream
    â””â”€â”€ user</code></pre>
                </div>
            </li>
          </ol>
        </li>
        <li>
          MuShop provides an umbrella helm chart called <code>setup</code>, which includes several
          <em>recommended</em> installations on the cluster. These installations represent
          common 3rd party services, which integrate with Oracle Cloud Infrastructure
          or enable certain features within the application.
          <hr />
          <ol>
            <li>ğŸ”“ Disconnect VPN</li>
            <li>
              Check <code>kubectl</code> context:
              <pre><code class="hljs sh">kubectl config current-context
# docker-for-desktop</code></pre>
            </li>
            <li>
              Add required <code>helm</code> repositories:
              <pre><code class="hljs text">helm repo add svc-cat https://svc-catalog-charts.storage.googleapis.com
helm repo add stable https://kubernetes-charts.storage.googleapis.com</code></pre>
            </li>
            <li>
              Install cluster dependencies using <code>helm</code>:
              <pre><code class="hljs text">helm dependency update deploy/helm-chart/setup</code></pre>
              <pre><code class="hljs text">helm install deploy/helm-chart/setup \
  --name mushop-setup \
  --namespace mushop-setup</code></pre>
              <div>
                <blockquote class="mu-small">
                  âš ï¸ It is possible that certain services may conflict with pre-existing installs.<br/>
                  If so, try setting <code>--set &lt;chart&gt;.enabled=false</code> for any
                  conflicting charts.
                </blockquote>
              </div>
            </li>
          </ol>
        </li>
        <li>
          MuShop application supports <em>"mock mode"</em> where service responses are mocked,
          yet the application is fully functional.
          <hr />
          <pre><code class="hljs sh">helm install deploy/helm-chart/mushop \
  --name mushop \
  --namespace mushop \
  --set global.mock.service="all"</code></pre>
          <pre><code class="hljs text">kubectl get pod --watch -n mushop</code></pre>
          <blockquote class="mu-small">
            â²ï¸ It may take a few moments to download all the application images.
            It is also normal for some to show errors in mock mode.
          </blockquote>
        </li>
        <!-- launch -->
        <li>
          Open MuShop in your browser: <a href="http://localhost" target="_blank">localhost</a>
          <blockquote class="mu-small">
            Kubernetes will use a self-signed SSL certificate by default
          </blockquote>
          <pre><code class="hljs text">########################################
   __  __        _____ _                 
  |  \/  |      / ____| |                
  | \  / |_   _| (___ | |__   ___  _ __  
  | |\/| | | | |\___ \| '_ \ / _ \| '_ \ 
  | |  | | |_| |____) | | | | (_) | |_) |
  |_|  |_|\__,_|_____/|_| |_|\___/| .__/ 
                                  | |    
                                  |_|    
########################################</code></pre>
          Alternatively access MuShop with a proxy to the cluster service
          <pre><code class="hljs text">kubectl port-forward \
  svc/edge 8000:80 \
  --namespace mushop</code></pre>
        </li>
      </ul>
  </section>

</section>

<section id="ready">
  <h2>ğŸ˜ Ready!</h2>
</section>